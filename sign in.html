<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>authentication</title>
    <style>
    /* From Uiverse.io by KapeParaguay + Morph Glass Effect */
    body {
      min-height: 100vh;
      background: url('Destech1.jpg') center/cover;
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
    }
    .form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      background: rgba(255,255,255,0.18);
      padding: 30px;
      width: 450px;
      max-width: 95vw;
      border-radius: 20px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
        Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      transition: background 0.3s ease;
      margin: 40px auto;
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18);
      backdrop-filter: blur(16px) saturate(180%);
      -webkit-backdrop-filter: blur(16px) saturate(180%);
      border: 1.5px solid rgba(255,255,255,0.35);
      /* Morphing glassmorphism animation */
      animation: morphGlass 8s ease-in-out infinite alternate;
    }
    @keyframes morphGlass {
      0% {
        border-radius: 20px 40px 30px 20px / 20px 30px 40px 20px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18);
      }
      50% {
        border-radius: 40px 20px 20px 40px / 30px 20px 20px 30px;
        box-shadow: 0 16px 48px 0 rgba(31, 38, 135, 0.22);
      }
      100% {
        border-radius: 20px 40px 30px 20px / 20px 30px 40px 20px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18);
      }
    }
    .form:hover {
      background: rgba(255,255,255,0.28);
    }
    ::placeholder {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
        Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
    }
    .form button {
      align-self: flex-end;
    }
    .flex-column > label {
      color: #151717;
      font-weight: 600;
    }
    .inputForm {
      border: 1.5px solid #ecedec;
      border-radius: 10em;
      height: 50px;
      display: flex;
      align-items: center;
      padding-left: 10px;
      transition: 0.2s ease-in-out;
      background-color: rgba(255,255,255,0.55);
      box-shadow: 0 2px 8px 0 rgba(31, 38, 135, 0.08);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .input {
      margin-left: 10px;
      border-radius: 10rem;
      border: none;
      width: 100%;
      height: 100%;
      background: transparent;
      color: #222;
      font-size: 1em;
    }
    .input:focus {
      outline: none;
      background: rgba(255,255,255,0.7);
    }
    .inputForm:focus-within {
      border: 1.5px solid #2d79f3;
      background: rgba(255,255,255,0.7);
    }
    .flex-row {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 10px;
      justify-content: space-between;
    }
    .flex-row > div > label {
      font-size: 14px;
      color: black;
      font-weight: 400;
    }
    .span {
      font-size: 14px;
      margin-left: 5px;
      color: white;
      font-weight: 500;
      cursor: pointer;
      text-shadow: 0 1px 6px #0002;
    }
    .button-submit {
      position: relative;
      display: inline-block;
      padding: 15px 30px;
      text-align: center;
      letter-spacing: 1px;
      text-decoration: none;
      background: rgba(255,255,255,0.18);
      transition: ease-out 0.5s;
      border: 2px solid;
      border-radius: 10em;
      box-shadow: 0 2px 8px 0 rgba(31, 38, 135, 0.12);
      margin: 20px 0 10px 0;
      color: #222;
      font-size: 15px;
      font-weight: 500;
      height: 50px;
      width: 100%;
      cursor: pointer;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .button-submit:hover {
      color: #fff;
      background: linear-gradient(90deg, #f857a6 0%, #ff5858 100%);
      box-shadow: 0 4px 16px 0 rgba(248,87,166,0.18);
      border-color: #ff5858;
    }
    .button-submit:active {
      transform: scale(0.96);
    }
    .p {
      text-align: center;
      color: black;
      font-size: 14px;
      margin: 5px 0;
      text-shadow: 0 1px 6px #fff6;
    }
    .btn {
      margin-top: 10px;
      width: 100%;
      height: 50px;
      border-radius: 10em;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: 500;
      gap: 10px;
      border: 1px solid #ededef;
      background-color: rgba(255,255,255,0.45);
      cursor: pointer;
      transition: 0.2s ease-in-out;
      box-shadow: 0 2px 8px 0 rgba(31, 38, 135, 0.08);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }
    .btn:hover {
      border: 1px solid #2d79f3;
      background: linear-gradient(90deg, #43cea2 0%, #185a9d 100%);
      color: #fff;
    }
    @media (max-width: 600px) {
      .form {
        width: 98vw;
        padding: 10px 2vw;
      }
    }
    </style>
</head>
<body>
  <form class="form" id="login-form" onsubmit="return handleSignIn(event)">
    <p class="login-title">LOGIN</p>
    <style>
      .login-title, .register-title {
        text-align: center;
        font-family: 'Segoe UI', Arial, sans-serif;
        font-size: 2em;
        font-weight: bold;
        color: #0d3851;
        margin: 0 0 10px 0;
        letter-spacing: 2px;
      }
    </style>
    <div class="flex-column">
      <label>Email </label>
    </div>
    <div class="inputForm">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="0 0 32 32" height="20">
        <g data-name="Layer 3" id="Layer_3">
          <path d="m30.853 13.87a15 15 0 0 0 -29.729 4.082 15.1 15.1 0 0 0 12.876 12.918 15.6 15.6 0 0 0 2.016.13 14.85 14.85 0 0 0 7.715-2.145 1 1 0 1 0 -1.031-1.711 13.007 13.007 0 1 1 5.458-6.529 2.149 2.149 0 0 1 -4.158-.759v-10.856a1 1 0 0 0 -2 0v1.726a8 8 0 1 0 .2 10.325 4.135 4.135 0 0 0 7.83.274 15.2 15.2 0 0 0 .823-7.455zm-14.853 8.13a6 6 0 1 1 6-6 6.006 6.006 0 0 1 -6 6z"></path>
        </g>
      </svg>
      <input placeholder="Enter your Email" class="input" type="email" required />
    </div>

    <div class="flex-column">
      <label>Password </label>
    </div>
    <div class="inputForm">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" viewBox="-64 0 512 512" height="20">
        <path d="m336 512h-288c-26.453125 0-48-21.523438-48-48v-224c0-26.476562 21.546875-48 48-48h288c26.453125 0 48 21.523438 48 48v224c0 26.476562-21.546875 48-48 48zm-288-288c-8.8125 0-16 7.167969-16 16v224c0 8.832031 7.1875 16 16 16h288c8.8125 0 16-7.167969 16-16v-224c0-8.832031-7.1875-16-16-16zm0 0"></path>
        <path d="m304 224c-8.832031 0-16-7.167969-16-16v-80c0-52.929688-43.070312-96-96-96s-96 43.070312-96 96v80c0 8.832031-7.167969 16-16 16s-16-7.167969-16-16v-80c0-70.59375 57.40625-128 128-128s128 57.40625 128 128v80c0 8.832031-7.167969 16-16 16zm0 0"></path>
      </svg>
      <input placeholder="Enter your Password" class="input" type="password" required />
    </div>

    <div class="flex-row">
      <div>
        <input type="radio" id="rememberMe" />
        <label for="rememberMe">Remember me </label>
      </div>
      <span class="span" style="color:#3b9ff7f1;" onclick="showForgotPasswordForm()">Forgot Password?</span>
    </div>
    <button class="button-submit" type="submit">Sign In</button>
    <span class="span" style="display:block; text-align:center; color:#000000e0; margin-bottom:10px; cursor:pointer;">
      Don't Have An Account? <span onclick="showRegisterForm()" style="color:#38b6ff; text-decoration:underline; cursor:pointer;">Register</span>
    </span>
    <p class="p line">Or With</p>
    <div class="flex-row">
      <button class="btn google" type="button" onclick="alert('Google login not implemented!')">
        <!-- Google SVG ... -->
        <img src="google logo.webp" alt="Google logo" style="width:22px; height:22px; vertical-align:middle; margin-right:8px;">
        Google
      </button>
      <button class="btn apple" type="button" onclick="alert('Apple login not implemented!')">
        <!-- Apple SVG ... -->
         <img src="Apple-Logo1.png" alt="Apple logo" style="width:22px; height:22px; vertical-align:middle; margin-right:8px;">
        Apple
      </button>
    </div>
  </form>

  <!-- Register Form (hidden by default) -->
  <form class="form" id="register-form" style="display:none;" onsubmit="return handleRegister(event)">
    <p class="register-title">REGISTER</p>
    <div class="flex-column">
      <label>First Name</label>
    </div>
    <div class="inputForm">
      <input placeholder="Enter your First Name" class="input" type="text" name="firstname" required />
    </div>
    <div class="flex-column">
      <label>Surname</label>
    </div>
    <div class="inputForm">
      <input placeholder="Enter your Surname" class="input" type="text" name="surname" required />
    </div>
    <div class="flex-column">
      <label>Gender</label>
    </div>
    <div class="inputForm">
      <select class="input" name="gender" required>
        <option value="" disabled selected>Select Gender</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
        <option value="other">Other</option>
      </select>
    </div>
    <div class="flex-column">
      <label>Email</label>
    </div>
    <div class="inputForm">
      <input placeholder="Enter your Email" class="input" type="email" name="email" required />
    </div>
    <div class="flex-column">
      <label>Address</label>
    </div>
    <div class="inputForm">
      <input placeholder="Enter your Address" class="input" type="text" name="address" required />
    </div>
    <div class="flex-column">
      <label>Country</label>
    </div>
    <div class="inputForm">
      <input placeholder="Enter your Country" class="input" type="text" name="country" required />
    </div>
    <div class="flex-column">
      <label>Password</label>
    </div>
    <div class="inputForm">
      <input placeholder="Enter your Password" class="input" type="password" name="password" required />
    </div>
    <div class="flex-column">
      <label>Confirm Password</label>
    </div>
    <div class="inputForm">
      <input placeholder="Confirm your Password" class="input" type="password" name="confirm_password" required />
    </div>
    <button class="button-submit" type="submit">Register</button>
    <p class="p">Already have an account? <span class="span" style="color:#0074d9;" onclick="showLoginForm()">Login</span></p>
  </form>

  <!-- Add this after your Register form, before the closing </body> -->
<form class="form" id="forgot-form" style="display:none;" onsubmit="return handleForgotPassword(event)">
  <p class="register-title">FORGOT PASSWORD</p>
  <div class="flex-column">
    <label>Email</label>
  </div>
  <div class="inputForm">
    <input placeholder="Enter your registered Email" class="input" type="email" name="forgot_email" required />
  </div>
  <button class="button-submit" type="submit">Send Reset Link</button>
  <p class="p">Remembered? <span class="span" style="color:#0074d9;" onclick="showLoginForm()">Login</span></p>
</form>

<!-- Reset Password Form (hidden by default) -->
<form class="form" id="reset-form" style="display:none;" onsubmit="return handleResetPassword(event)">
  <p class="register-title">RESET PASSWORD</p>
  <div class="flex-column">
    <label>New Password</label>
  </div>
  <div class="inputForm">
    <input placeholder="Enter new password" class="input" type="password" name="reset_password" required />
  </div>
  <div class="flex-column">
    <label>Confirm New Password</label>
  </div>
  <div class="inputForm">
    <input placeholder="Confirm new password" class="input" type="password" name="reset_confirm_password" required />
  </div>
  <button class="button-submit" type="submit">Reset Password</button>
  <p class="p"><span class="span" style="color:#0074d9;" onclick="showLoginForm()">Back to Login</span></p>
</form>

  <script>
    // Store users in localStorage for demo purposes
    function getUsers() {
      return JSON.parse(localStorage.getItem('destech_users') || '[]');
    }
    function setUsers(users) {
      localStorage.setItem('destech_users', JSON.stringify(users));
    }

    function handleRegister(e) {
      e.preventDefault();
      const form = e.target;
      const firstname = form.firstname.value.trim();
      const surname = form.surname.value.trim();
      const gender = form.gender.value;
      const email = form.email.value.trim().toLowerCase();
      const address = form.address.value.trim();
      const country = form.country.value.trim();
      const password = form.password.value;
      const confirm_password = form.confirm_password.value;

      if (password !== confirm_password) {
        alert('Passwords do not match!');
        return false;
      }

      let users = getUsers();
      if (users.some(u => u.email === email)) {
        alert('A user with this email already exists.');
        return false;
      }

      users.push({
        firstname,
        surname,
        gender,
        email,
        address,
        country,
        password // In production, never store plain passwords!
      });
      setUsers(users);

      alert('Registration successful! You can now log in.');
      showLoginForm();
      return false;
    }

    function handleSignIn(e) {
      e.preventDefault();
      const form = e.target;
      const email = form.querySelector('input[type="email"]').value.trim().toLowerCase();
      const password = form.querySelector('input[type="password"]').value;

      let users = getUsers();
      const user = users.find(u => u.email === email && u.password === password);
      if (user) {
        alert('Login successful! Welcome, ' + user.firstname + '.');
        // Redirect to homepage after login
        window.location.href = "e-mmorce.html";
      } else {
        alert('Invalid email or password.');
      }
      return false;
    }

    function showRegisterForm() {
      document.getElementById('login-form').style.display = 'none';
      document.getElementById('register-form').style.display = 'flex';
      document.getElementById('forgot-form').style.display = 'none';
      document.getElementById('reset-form').style.display = 'none';
    }
    function showLoginForm() {
      document.getElementById('register-form').style.display = 'none';
      document.getElementById('login-form').style.display = 'flex';
      document.getElementById('forgot-form').style.display = 'none';
      document.getElementById('reset-form').style.display = 'none';
    }
    function showForgotPasswordForm() {
      document.getElementById('login-form').style.display = 'none';
      document.getElementById('register-form').style.display = 'none';
      document.getElementById('forgot-form').style.display = 'flex';
      document.getElementById('reset-form').style.display = 'none';
    }
    function showResetForm() {
      document.getElementById('login-form').style.display = 'none';
      document.getElementById('register-form').style.display = 'none';
      document.getElementById('forgot-form').style.display = 'none';
      document.getElementById('reset-form').style.display = 'flex';
    }
    function handleForgotPassword(e) {
      e.preventDefault();
      alert('A password reset link has been sent to your email (simulation).');
      showResetForm();
      return false;
    }
    function handleResetPassword(e) {
      e.preventDefault();
      const pwd = e.target.reset_password.value;
      const cpwd = e.target.reset_confirm_password.value;
      if (pwd !== cpwd) {
        alert('Passwords do not match!');
        return false;
      }
      // For demo, reset the first user found (in real app, use token/email)
      let users = getUsers();
      if (users.length > 0) {
        users[0].password = pwd;
        setUsers(users);
        alert('Your password has been reset (simulation).');
        showLoginForm();
      } else {
        alert('No user found to reset.');
      }
      return false;
    }

    // Google and Apple login functionality
    function handleGoogleLogin() {
      alert('Google login functionality not implemented.\nHere you would redirect to Google OAuth.');
      // Example: window.location.href = 'https://accounts.google.com/o/oauth2/auth?...';
    }
    function handleAppleLogin() {
      alert('Apple login functionality not implemented.\nHere you would redirect to Apple OAuth.');
      // Example: window.location.href = 'https://appleid.apple.com/auth/authorize?...';
    }

    // Attach handlers to buttons after DOM is loaded
    window.onload = function() {
      var googleBtns = document.querySelectorAll('.btn.google');
      var appleBtns = document.querySelectorAll('.btn.apple');
      googleBtns.forEach(btn => btn.onclick = handleGoogleLogin);
      appleBtns.forEach(btn => btn.onclick = handleAppleLogin);
    }
  </script>
</body>
</html>